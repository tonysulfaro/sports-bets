from google.oauth2 import id_token
from google.auth.transport import requests

request = requests.Request()

token = b'eyJhbGciOiJSUzI1NiIsImtpZCI6IjhjNThlMTM4NjE0YmQ1ODc0MjE3MmJkNTA4MGQxOTdkMmIyZGQyZjMiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJhY2NvdW50cy5nb29nbGUuY29tIiwiYXpwIjoiNjk1MzcyMzk0MjMtMW5uNzh0NWs3Z20ybmxnYWZ0Y21pNmY0dXQ5cmNyMmkuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJhdWQiOiI2OTUzNzIzOTQyMy0xbm43OHQ1azdnbTJubGdhZnRjbWk2ZjR1dDlyY3IyaS5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbSIsInN1YiI6IjExNDEwNDMxOTgxNzc4ODYyMDM5OCIsImVtYWlsIjoidG9ueTExNjUyM0BnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiYXRfaGFzaCI6ImlfNnEzLVMzek4tYlJRU0lNVzlUOXciLCJuYW1lIjoidG9ueSBTdWxmYXJvIiwicGljdHVyZSI6Imh0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS9hLS9BQXVFN21BNm1tY1U2V1V3enhNN0FhRm55UFBXMFZqa0JYT2FpdkFMQkdBY19nPXM5Ni1jIiwiZ2l2ZW5fbmFtZSI6InRvbnkiLCJmYW1pbHlfbmFtZSI6IlN1bGZhcm8iLCJsb2NhbGUiOiJlbiIsImlhdCI6MTU3MDI0MzQ4NCwiZXhwIjoxNTcwMjQ3MDg0LCJqdGkiOiIzNGJiZTFmM2ZiMDMwNDUxMWNlNmU1OTdmNGYwMDJmYzJkMzU1YzY3In0.xL6C3Y1tOovodRo_PcVKw_XgeSaa0sKOUOPMGRbEPc0WfH0xHPMFd2WK4a6Ei328R-YZeR5C8P6eYctenZePKIDUUb-pmxuZD5RlsUIw7sv9BR0M2WTE1iY-NLfyzuoNpJk64focLWakF_uW04pRdgax_frpMXMGwUILzPX2Z9JJDSCBB6fvF-wK9lEqdgowzlA7Tf7o7t5OEzTsqsLaJMfLZbnqK0IbSIFhp5O3sXSXZ1WJ3-7RhSJ-eBsZd_eytPHYg_yamNLUG3SXBFoF0UGUcyRKQQRHbED7_wmToT2oHSmrpnmv_wsm4xu7hQgGyND8AXpwydUiPt2BZo28AA'

id_info = id_token.verify_oauth2_token(
    token, request, 'my-client-id.example.com')

if id_info['iss'] != 'https://accounts.google.com':
    raise ValueError('Wrong issuer.')

userid = id_info['sub']